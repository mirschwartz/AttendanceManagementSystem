@using Attendance_Management_System.Data.Models
@model Attendance_Management_System.ViewModels.ReportsVM

@{
    ViewBag.Title = "Reports";
    ViewBag.Description = "Reports";
}

<h2>Reports</h2>
<form action="/reports">
    <div class="row">
        <div class="col-md-3">
            <select name="classId" class="form-control">
                <option value="0">All Classes</option>
                @foreach (var c in Model.Classes)
                {
                    <option @(c.ClassId == Model.ClassId ? "selected" : "") value="@c.ClassId">@c.ClassName - @c.Year</option>
                }
            </select>
        </div>

        <div class="col-md-3">
            <select name="teacher" class="form-control">
                <option value="0">All Teachers</option>
                @foreach (var t in Model.Teachers)
                {
                    <option @(t.TeacherId == Model.Teacher ? "selected" : "") value="@t.TeacherId">@t.Title @t.FirstName @t.LastName</option>
                }
            </select>
        </div>

        <div class="col-md-3">
            <select name="student" class="form-control">
                <option value="0">All Students</option>
                @foreach (var s in Model.Students)
                {
                    <option @(s.StudentId == Model.Student ? "selected" : "") value="@s.StudentId">@s.FirstName @s.LastName</option>
                }
            </select>
        </div>

        <div class="col-md-2">
            <button class="btn btn-theme" id="print">Print</button>
        </div>
    </div>

    <button type="button" id="btn-more-options" class="btn btn-link btn-link-theme">More Options</button>
    <button type="button" id="btn-fewer-options" class="btn btn-link btn-link-theme">Fewer Options</button>

    <div hidden id="more-options" class="row">
        <div class="col-md-3">
            <select name="status" class="form-control">
                <option value="0">All</option>
                <option @(Model.Status == Status.Present ? "selected" : "") value="@Status.Present">Present</option>
                <option @(Model.Status == Status.UnexcusedAbsence ? "selected" : "") value="@Status.UnexcusedAbsence">Unexcused Absence</option>
                <option @(Model.Status == Status.ExcusedAbsence ? "selected" : "") value="@Status.ExcusedAbsence">Excused Absence</option>
            </select>
        </div>

        <div class="col-md-3">
            <input type="text" name="date" placeholder="Date" id="date" class="form-control" value="@Model.Date" />
        </div>
    </div>

    <button style="margin-top: 5px; margin-bottom: 5px;" id="create-report" class="btn btn-theme">Create Report</button>

</form>

<table class="table table-hover table-bordered table-striped">
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Teacher</th>
        <th>Class</th>
        <th>Status</th>
        <th>Date</th>
    </tr>
    @foreach (var a in Model.Attendances)
    {
        <tr>
            <td>@a.StudentClass.Student.FirstName</td>
            <td>@a.StudentClass.Student.LastName</td>
            <td>@a.TeacherSubject.Teacher.Title @a.TeacherSubject.Teacher.LastName</td>
            <td>@a.StudentClass.Class.ClassName</td>
            <td>@a.Status</td>
            <td>@a.Date.ToShortDateString()</td>
        </tr>
    }
</table>

@section scripts{
    <script src="~/Scripts/bootstrap-datepicker.js"></script>
    <script src="~/Scripts/reports.js"></script>
}